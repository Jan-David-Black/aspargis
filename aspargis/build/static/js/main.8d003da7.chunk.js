(this.webpackJsonpaspargis=this.webpackJsonpaspargis||[]).push([[0],{216:function(e,t,n){},225:function(e,t,n){},233:function(e,t,n){},345:function(e,t,n){},346:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(66),s=n.n(c),o=(n(216),n(35)),i=n(36),l=n(67),u=n.n(l),d=n(91),p=n(13),b=n(191),j=n(398),h=n(400),m=n(385),f=n(180),O=n(2);var v=function(e){var t=Object(o.b)(),n=t.isAuthenticated,a=t.getAccessTokenSilently,c=t.isLoading,s=Object(r.useState)(),l=Object(p.a)(s,2),v=l[0],g=l[1],x=Object(r.useState)(),y=Object(p.a)(x,2),w=y[0],S=y[1],k=Object(b.a)({uri:"/v1alpha1/graphql"});return Object(r.useEffect)((function(){var e=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({audience:"https://aspargis.de",scope:"read:current_user"});case 3:t=e.sent,g(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error fetching jwt:",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(r.useEffect)((function(){var e=Object(f.a)((function(e,t){var n=t.headers,r=v;return r?{headers:Object(i.a)(Object(i.a)({},n),{},{authorization:"Bearer ".concat(r)})}:{headers:Object(i.a)({},n)}})),t=new j.a({link:e.concat(k),cache:new h.a});S(t)}),[v]),c?"Loading...":n&&v?Object(O.jsx)(m.a,{client:w,children:e.children}):Object(O.jsx)(O.Fragment,{})},g=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,t){navigator.serviceWorker.register(e).then(function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.onupdatefound=function(){var e=n.installing;null!=e&&(e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(n)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(n)))})};case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error during service worker registration:",e)}))}function y(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):x(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}var w,S,k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,421)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},_=n(16),E=n(17),C=n(20),I=n(19),G=n(30),N=n(399),z=n(405),P=n(60),D=["title","titleId"];function T(){return T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}function W(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function U(e,t){var n=e.title,a=e.titleId,c=W(e,D);return r.createElement("svg",T({viewBox:"0 0 500 500",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,r.createElement("path",{d:"m518.27 402.33v-1.2s-214.03-8.7751-260.43-26.575c-119.53-45.6-146.16-182.35-202.75-195.69-43.121-13.3-30.439-10.876-66.547-10.876v350.25h529.73z",fill:"#707272",style:{fill:"#9c9e9e",strokeWidth:1.028}}),w||(w=r.createElement("rect",{x:-559,y:-298,width:0,height:0,fill:"#707272"})),S||(S=r.createElement("rect",{x:-34.3,y:135,width:0,height:0,fill:"#21B469"})),r.createElement("path",{d:"m36.699 110.2-17.699 17 17.699 16.9h0.17578l6.4258 289 12.699 30.6 12.6-31.799 4.0605-288.33 17.24-16.367-17.801-17h-35.4z",style:{fill:"#578a1e"}}),r.createElement("path",{d:"m152.01 112.32h81.829v65.767h-81.829z",style:{fill:"none",strokeWidth:1.6907}}),r.createElement("text",{style:{fontFamily:"sans-serif",fontSize:40,letterSpacing:0,lineHeight:1.25,shapeInside:"url(#rect2371)",whiteSpace:"pre",wordSpacing:0},xmlSpace:"preserve"}))}var L=r.forwardRef(U),A=(n.p,["title","titleId"]);function B(){return B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}function $(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function V(e,t){var n=e.title,a=e.titleId,c=$(e,A);return r.createElement("svg",B({width:"7.8643mm",height:"18.357mm",viewBox:"0 0 7.8643 18.357",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,r.createElement("g",{transform:"translate(-104.39 -120.1)"},r.createElement("g",{transform:"matrix(.26458 0 0 .26458 67.644 90.982)"},r.createElement("path",{d:"m158.2 137.35v20.796c0 0.33814 0.16907 0.50721 0.33814 0.84535 1.3526 1.1835 2.1979 2.536 2.8742 4.2268 0.33814 0.84535 0.50721 1.5216 0.67628 2.367 0.16907 1.1835 0.16907 2.367 0.16907 3.5505-0.16907 1.0144-0.33814 2.0288-0.84535 3.0433-0.67628 1.6907-1.8598 3.2123-3.2123 4.3958-0.84535 0.67628-1.8598 1.3526-2.8742 1.8598-0.67628 0.33814-1.3526 0.50721-2.1979 0.67628-0.84535 0.33814-1.8598 0.33814-2.8742 0.33814-0.67628 0-1.5216-0.16907-2.1979-0.33814-0.50721-0.16907-1.0144-0.16907-1.5216-0.50721-1.0144-0.33814-1.8598-0.84535-2.7051-1.3526-1.0144-0.67628-1.8598-1.5216-2.7051-2.536-0.67628-0.84535-1.1835-1.6907-1.5216-2.7051-0.67628-1.6907-0.84535-3.3814-0.67628-5.2412 0.16907-1.0144 0.33814-1.8598 0.67628-2.8742s0.84535-2.0288 1.5216-2.8742c0.50721-0.67628 1.0144-1.3526 1.6907-1.8598 0.16907-0.16907 0.16907-0.33814 0.16907-0.50721v-41.084c0-1.8598 0.50721-3.5505 1.8598-4.903 0.67628-0.84535 1.6907-1.5216 2.7051-2.0288 1.3526-0.50721 2.7051-0.67628 4.0577-0.50721 1.0144 0.16907 1.8598 0.50721 2.7051 1.0144 1.5216 0.84535 2.536 2.1979 3.0433 3.7195 0.16907 0.67628 0.33814 1.1835 0.33814 1.8598v0.84535c0.50721 6.4247 0.50721 13.187 0.50721 19.781zm-3.2123 1.1835v-21.134c0-1.0144-0.33814-1.8598-0.84535-2.7051-0.67628-1.0144-1.6907-1.5216-2.8742-1.6907-0.50721-0.16907-1.1835 0-1.6907 0.16907-0.67628 0.16907-1.1835 0.50721-1.6907 1.1835-0.50721 0.50721-0.84535 1.1835-1.0144 1.8598-0.16907 0.50721-0.16907 0.84535-0.16907 1.3526v42.098c0 0.50721-0.16907 0.84535-0.67628 1.1835-0.84535 0.50721-1.5216 1.1835-2.0288 2.0288-0.67628 1.0144-1.1835 2.0288-1.3526 3.2123-0.16907 0.67628-0.16907 1.3526-0.16907 2.0288 0.16907 0.67628 0.16907 1.3526 0.33814 2.0288 0.33814 0.84535 0.67628 1.6907 1.3526 2.367 0.67628 0.84535 1.5216 1.6907 2.536 2.1979 0.84535 0.50721 1.8598 0.84535 2.8742 1.0144 1.1835 0.16907 2.367 0 3.3814-0.33814s1.8598-0.84535 2.7051-1.5216c1.1835-1.0144 2.1979-2.1979 2.7051-3.7195 0.33814-0.84535 0.50721-1.8598 0.50721-2.7051 0-0.67628-0.16907-1.3526-0.33814-2.0288-0.16907-0.84535-0.67628-1.6907-1.0144-2.536-0.67628-1.0144-1.5216-1.8598-2.536-2.536-0.16907-0.16907-0.33814-0.33814-0.33814-0.50721v-0.50721c0.33814-6.7628 0.33814-13.695 0.33814-20.796z",style:{opacity:.95402,strokeWidth:1.6907}}),r.createElement("path",{d:"m168.51 135.32c0.16907 0.50721 0 1.0144 0 1.6907h-7.7772c-0.50721 0-0.50721 0-0.50721-0.50721v-0.84535c0-0.33814 0-0.33814 0.33814-0.33814h7.6082z",style:{opacity:.95402,strokeWidth:1.6907}}),r.createElement("path",{d:"m160.23 145.97v-1.3526c0-0.16907 0.16907-0.33814 0.33814-0.33814h7.6082c0.33814 0 0.33814 0 0.33814 0.33814v1.1835c-0.33814 0.33814-7.7772 0.33814-8.2844 0.16907z",style:{opacity:.95402,strokeWidth:1.6907}}),r.createElement("path",{d:"m164.46 139.88v1.6907h-3.7195c-0.33814 0-0.50721 0-0.50721-0.50721v-0.84535c0-0.33814 0-0.33814 0.33814-0.33814h1.6907z",style:{opacity:.95402,strokeWidth:1.6907}}),r.createElement("path",{d:"m164.46 132.45h-3.7195c-0.16907 0-0.33814-0.16907-0.33814-0.33814v-1.1835c0.33814-0.16907 3.5505-0.16907 4.0577 0z",style:{opacity:.95402,strokeWidth:1.6907}}),r.createElement("path",{d:"m152.45 147.49v14.202c0 0.16907 0.16907 0.33814 0.33814 0.50721 1.0144 0.33814 1.8598 1.0144 2.536 1.6907 0.50721 0.67628 0.84535 1.3526 1.0144 2.0288 0.16907 0.84535 0.33814 1.8598 0.16907 2.7051-0.33814 1.5216-1.1835 2.8742-2.536 3.7195-0.67628 0.33814-1.3526 0.67628-2.0288 0.84535-0.50721 0.16907-1.0144 0.16907-1.5216 0.16907-1.1835-0.16907-2.1979-0.50721-3.2123-1.1835-0.84535-0.67628-1.3526-1.3526-1.6907-2.1979-0.16907-0.50721-0.50721-1.1835-0.50721-1.6907 0-0.84535 0-1.5216 0.16907-2.1979 0.33814-0.84535 0.67628-1.5216 1.1835-2.1979 0.67628-0.67628 1.5216-1.1835 2.367-1.5216 0.16907 0 0.33814-0.16907 0.33814-0.33814v-28.235c0-0.50721 0-0.84535 0.33814-1.1835 0.50721-0.67628 1.1835-0.67628 1.8598-0.50721 0.50721 0.16907 1.0144 0.67628 1.1835 1.3526v0.84535z",style:{opacity:.95402,strokeWidth:1.6907}}))))}var F=r.forwardRef(V),q=(n.p,n(225),function(e){Object(C.a)(n,e);var t=Object(I.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.temp.map((function(e,t){return t?Object(O.jsxs)("p",{className:"damm-elem damm-temp damm-temp"+t,children:[e.toFixed(2),"\xb0C"]},t):null}));return Object(O.jsxs)("div",{className:"damm-container",children:[Object(O.jsx)(L,{className:"damm-elem damm-bg"}),Object(O.jsx)("h3",{className:"damm-elem damm-name",children:this.props.pos}),Object(O.jsx)("h4",{className:"damm-elem damm-sub",children:this.props.type}),Object(O.jsx)(F,{className:"damm-elem damm-thermo damm-thermo1"}),Object(O.jsx)(F,{className:"damm-elem damm-thermo damm-thermo2"}),Object(O.jsx)(F,{className:"damm-elem damm-thermo damm-thermo3"}),Object(O.jsx)(F,{className:"damm-elem damm-thermo damm-thermo4"}),Object(O.jsxs)("p",{className:"damm-elem damm-label damm-label1",children:["0",Object(O.jsx)("br",{}),"cm"]}),Object(O.jsxs)("p",{className:"damm-elem damm-label damm-label2",children:["-5",Object(O.jsx)("br",{}),"cm"]}),Object(O.jsxs)("p",{className:"damm-elem damm-label damm-label3",children:["-25",Object(O.jsx)("br",{}),"cm"]}),Object(O.jsxs)("p",{className:"damm-elem damm-label damm-label4",children:["-40",Object(O.jsx)("br",{}),"cm"]}),e]})}}]),n}(r.Component)),M=q,R=function(e){Object(C.a)(n,e);var t=Object(I.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e,t=[0,0,0,0];return this.props.group.Sensors.forEach((function(e){var n,r=null===(n=e.Correction_Sensorpositions[0])||void 0===n?void 0:n.pos;r=r||e.Type.charAt(4),t[r]=e.Sensor_Values[0].Value})),Object(O.jsx)(P.b,{to:"/details/".concat(this.props.group.SGroup),children:Object(O.jsx)(M,{temp:t,pos:this.props.group.Position,type:null===(e=this.props.group.Spargelsorten)||void 0===e?void 0:e.Name})})}}]),n}(r.Component),H=R,K=(n(233),n(184)),J=n.n(K),Q=n(386),Y=n(411),Z=n(407),X=n(413),ee=n(186),te=n.n(ee),ne=n(187),re=n.n(ne),ae=a.a.forwardRef((function(e,t){return Object(O.jsx)(Q.a,Object(i.a)({direction:"up",ref:t},e))}));function ce(e){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Y.a,{onClick:e.handleClickOpen,color:"primary",style:{position:"fixed",bottom:20,right:20},children:Object(O.jsx)(te.a,{})}),Object(O.jsxs)(Z.a,{fullScreen:!0,open:e.open,onClose:e.handleClose,TransitionComponent:ae,children:[Object(O.jsx)(X.a,{color:"inherit",onClick:e.handleClose,"aria-label":"close",children:Object(O.jsx)(re.a,{})}),e.children]})]})}var se,oe=n(414),ie=n(420),le=Object(N.a)(se||(se=Object(G.a)(["\nmutation acquireSensor($SGroupID: Int!) {\n  update_SGroups(where:{SGroup:{_eq:$SGroupID}}){\n    affected_rows\n  }\n}\n"])));var ue,de=function(e){var t=Object(ie.a)(le,{refetchQueries:["Overview"]}),n=Object(p.a)(t,1)[0],r=a.a.useState(!1),c=Object(p.a)(r,2),s=c[0],o=c[1];return Object(O.jsx)(ce,{handleClickOpen:function(){o(!0)},handleClose:function(){o(!1)},open:s,children:Object(O.jsx)(oe.a,{display:"flex",alignItems:"center",justifyContent:"center",children:Object(O.jsx)(J.a,{delay:500,style:{height:150,width:400},onError:function(e){console.log(e)},onScan:function(e){console.log("Found",{result:e}),isNaN(e.data)?console.error("Non numeric values are invalid"):n({variables:{SGroupID:e.data}}),o(!1)}})})})},pe=Object(N.a)(ue||(ue=Object(G.a)(["\nquery Overview {\n  SGroups {\n    SGroup\n    Position\n    Spargelsorten {\n      Name\n    }\n    Sensors {\n      Correction_Sensorpositions {\n        pos\n      }\n      Type\n      Sensor_Values(limit: 1, order_by: {Timestamp: desc}) {\n        Timestamp\n        Value\n      }\n    }\n  }\n}\n"])));var be,je,he=function(){var e=Object(z.a)(pe),t=e.loading,n=e.error,r=e.data;if(n)return console.error(n),"Error";if(t)return"Loading";console.log({data:r});var a=r.SGroups.map((function(e){return Object(O.jsx)(H,{group:e},e.SGroup)}));return Object(O.jsxs)("div",{className:"overview-container",children:[a,Object(O.jsx)(de,{})]})},me=n(193),fe=n(120),Oe=n(34),ve=n.n(Oe),ge=(n(343),n(24)),xe=n(401),ye=n(416),we=n(397),Se=n(415),ke=Object(N.a)(be||(be=Object(G.a)(["\nmutation shareSensor($SGroupID: Int!, $user: String!) {\n  insert_share_one(object: {SGroup: $SGroupID, User: $user}, on_conflict: {constraint: share_pkey, update_columns: []}) {\n    __typename\n  }\n}\n\n"]))),_e=Object(N.a)(je||(je=Object(G.a)(["\nquery findUserID($email: String!) {\n  Users(where: {email: {_eq: $email}}) {\n    user_id\n  }\n}\n"])));var Ee,Ce=function(e){var t=Object(r.useState)("test"),n=Object(p.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),o=Object(p.a)(s,2),i=o[0],l=o[1],u=Object(ie.a)(ke),d=Object(p.a)(u,1)[0],b=Object(z.a)(_e,{variables:{email:a}}),j=b.loading,h=b.data,m=function(){l(!1)};return Object(O.jsxs)(ce,{handleClickOpen:function(){l(!0)},handleClose:m,open:i,children:[Object(O.jsx)(we.a,{value:a,onChange:function(e){c(e.target.value)}}),Object(O.jsx)(Se.a,{disabled:j||0===h.Users.length,onClick:function(){d({variables:{SGroupID:e.SGroupID,user:h.Users[0].user_id}}),m()},children:"Share"})]})},Ie=["children","value","index"],Ge=Object(N.a)(Ee||(Ee=Object(G.a)(["\nquery PlotData($SGroup: Int!) {\n  SGroups_by_pk(SGroup: $SGroup) {\n    Position\n    Sorte\n    Owner\n    shares {\n      userByUser {\n        email\n      }\n    }\n    Sensors {\n      Type\n      Correction_Sensorpositions {\n        pos\n      }\n      Daily {\n        avg\n        max\n        date_trunc\n      }\n      Sensor_Values{\n        Timestamp\n        Value\n      }\n    }\n  }\n}\n"])));var Ne=function(e){var t=Object(ge.f)().SGroupID,n=Object(z.a)(Ge,{variables:{SGroup:t}}),a=n.loading,c=n.error,s=n.data,i=Object(r.useState)(0),l=Object(p.a)(i,2),u=l[0],d=l[1],b=Object(o.b)().user;if(!t)return"Something has gone wrong";if(c)return console.error(c),"Error";if(a)return"Loading";var j=s.SGroups_by_pk.Sensors,h=s.SGroups_by_pk.Owner===b.sub,m=s.SGroups_by_pk.shares.map((function(e){return e.userByUser.email})).join(", ");return Object(O.jsxs)(oe.a,{sx:{width:"100%"},children:[h?Object(O.jsx)(Ce,{SGroupID:t}):"shared",Object(O.jsxs)(xe.a,{value:u,onChange:function(e,t){d(t)},children:[Object(O.jsx)(ye.a,{label:"Averages"}),Object(O.jsx)(ye.a,{label:"Min-Max"}),Object(O.jsx)(ye.a,{label:"Full"}),Object(O.jsx)(ye.a,{label:"Battery"})]}),Object(O.jsx)(Te,{value:u,index:0,children:Object(O.jsx)(ze,{sensors:j})}),Object(O.jsx)(Te,{value:u,index:1,children:"TODO"}),Object(O.jsx)(Te,{value:u,index:2,children:Object(O.jsx)(De,{sensors:j})}),Object(O.jsx)(Te,{value:u,index:3,children:Object(O.jsx)(Pe,{sensors:j})}),"shared with: ",m]})};function ze(e){var t={labels:[],datasets:[]};return e.sensors.forEach((function(e,n){var r;if("v_bat"!==e.Type){var a={label:"temp"+(null!==(r=e.Correction_Sensorpositions.pos)&&void 0!==r?r:n),data:[]};e.Daily.forEach((function(e){var r=ve()(e.date_trunc);n||t.labels.push(r),a.data.push(e.max)})),t.datasets.push(a)}})),Object(O.jsx)(fe.a,{data:t,options:{normalized:!0,elements:{point:{radius:0}},scales:{x:{type:"time"},y:{type:"linear"}}}})}function Pe(e){var t={labels:[],datasets:[]};return e.sensors.forEach((function(e,n){if("v_bat"===e.Type){var r={label:"bat",data:[]};e.Daily.forEach((function(e){var n=ve()(e.date_trunc);t.labels.push(n),r.data.push(e.max)})),t.datasets.push(r)}})),Object(O.jsx)(fe.a,{data:t,options:{normalized:!0,elements:{point:{radius:0}},scales:{x:{type:"time"},y:{type:"linear"}}}})}function De(e){var t={labels:[],datasets:[]};return e.sensors.forEach((function(e,n){var r,a={label:"temp"+(null!==(r=e.Correction_Sensorpositions.pos)&&void 0!==r?r:n),data:[]};"v_bat"!==e.Type&&(e.Sensor_Values.forEach((function(e){var r=ve()(e.Timestamp);n||t.labels.push(r),a.data.push(e.Value)})),t.datasets.push(a))})),Object(O.jsx)(fe.a,{data:t,options:{normalized:!0,elements:{point:{radius:0}},scales:{x:{type:"time"},y:{type:"linear"}}}})}function Te(e){var t=e.children,n=e.value,r=e.index,a=Object(me.a)(e,Ie);return Object(O.jsx)("div",Object(i.a)(Object(i.a)({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},a),{},{children:n===r&&Object(O.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"20px"},children:t})}))}var We;n(345);function Ue(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}var Le=Object(N.a)(We||(We=Object(G.a)(["\nmutation setSub($sub: jsonb!, $user: String!) {\n  update_Users_by_pk(pk_columns: {user_id: $user}, _append: {subscriptions: $sub}) {\n    user_id\n  }\n}\n"]))),Ae=function(){var e=Object(o.b)(),t=e.user,n=e.isAuthenticated,r=Object(ie.a)(Le),a=Object(p.a)(r,1)[0];return navigator.serviceWorker.ready.then((function(e){return e.pushManager.getSubscription().then((function(t){return t?{sub:t,new:!1}:e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ue("BN1rZgnIUhURBJGNVVbLHUp2LMzfrKtPDfvP9QgNUzu1oBnFPLPLrOjKaNDry44Pzv0uD_YI4KAiqmQawoMHcr4")}).then((function(e){return{sub:e,new:!0}}))}))})).then((function(e){console.log("Sub:",e),e.new&&a({variables:{sub:e.sub,user:t.sub}})})),n&&Object(O.jsxs)("div",{className:"profile-container",children:[Object(O.jsx)("img",{src:t.picture,alt:t.name,className:"profile-picture"}),Object(O.jsx)("h2",{children:t.name}),Object(O.jsx)("p",{children:t.email})]})},Be=function(e){Object(C.a)(n,e);var t=Object(I.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return Object(O.jsxs)(ge.c,{children:[Object(O.jsx)(ge.a,{path:"/details/:SGroupID",children:Object(O.jsx)(Ne,{})}),Object(O.jsx)(ge.a,{path:"/profile",children:Object(O.jsx)(Ae,{})}),Object(O.jsx)(ge.a,{path:"/",children:Object(O.jsx)(he,{})})]})}}]),n}(r.Component),$e=Be;var Ve=function(){var e=Object(o.b)().loginWithRedirect;return Object(O.jsx)(Se.a,{color:"inherit",onClick:function(){e()},children:"Log In"})},Fe=n(409),qe=n(192),Me=n(404);var Re=Object(ge.g)((function(e){var t=a.a.useState(null),n=Object(p.a)(t,2),r=n[0],c=n[1],s=Object(o.b)().logout;return Object(O.jsxs)("div",{children:[Object(O.jsx)(X.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},color:"inherit",children:Object(O.jsx)(Fe.a,{sx:{width:24,height:24},alt:"Avatar",src:e.user.picture})}),Object(O.jsxs)(qe.a,{id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(r),onClose:function(){c(null)},children:[Object(O.jsx)(Me.a,{onClick:function(){return e.history.push("/profile")},children:"Profile"}),Object(O.jsx)(Me.a,{onClick:function(){s({returnTo:window.location.origin})},children:"Logout"})]})]})})),He=n(417),Ke=n(418),Je=n(419);var Qe=function(){var e=Object(o.b)(),t=e.user,n=e.isAuthenticated,r=e.isLoading;return Object(O.jsx)(He.a,{position:"static",children:Object(O.jsxs)(Ke.a,{children:[Object(O.jsx)(Je.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(O.jsx)(P.b,{to:"/",children:"Aspargis"})}),r?"Loading":n?Object(O.jsx)(Re,{user:t}):Object(O.jsx)(Ve,{})]})})};s.a.render(Object(O.jsx)(o.a,{domain:"dev-leodorh9.us.auth0.com",clientId:"VPe92gUMGhq9WHnHljMB6p0OIN0pf2bA",redirectUri:window.location.origin,audience:"https://aspargis.de",scope:"read:current_user update:current_user_metadata",children:Object(O.jsxs)(P.a,{children:[Object(O.jsx)(Qe,{}),Object(O.jsx)(v,{children:Object(O.jsx)($e,{})})]})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n="".concat("","/service-worker.js"),g?(y(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):x(n,e);case 2:case"end":return t.stop()}}),t)}))))}}(),k()}},[[346,1,2]]]);
//# sourceMappingURL=main.8d003da7.chunk.js.map